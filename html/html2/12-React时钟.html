<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>React练习-时钟</title>
    <script src="../js/react.development.js"></script>
    <script src="../js/react-dom.development.js"></script>
    <script src="../js/browser.js"></script>
</head>
<body>
    <div id='div1'>

    </div>
</body>
    <script type="text/babel">
        //
        class Clock extends React.Component{
            constructor (...args){
                super(...args);

                //设置初始状态
                this.state = {
                    h: 0,
                    m: 0,
                    s: 0
                }

                //定时器
                var _this = this;
                setInterval(function(){
                    _this.tick();
                },1000);

                // this.tick();     //无效
            }

            //更新之前
            componentWillUpdate(){
                console.log('即将更新时间');
            }

            //更新之后
            componentDidUpdate(){
                console.log('时间已更新');
            }

            //生存周期-更新之后
            componentDidMount(){
                this.tick();
            }

            //获取系统当前时分秒
            tick(){
                var oDate = new Date();
                this.setState({
                    h: oDate.getHours(),
                    m: oDate.getMinutes(),
                    s: oDate.getSeconds()
                });
            }

            //使用组件
            render(){
                return <div>
                        <span>{this.state.h}</span>：
                        <span>{this.state.m}</span>：
                        <span>{this.state.s}</span>
                    </div>;
            };
        }

        //
        window.onload = function () {
            var oDiv = document.getElementById('div1');

            ReactDOM.render(
                <Clock/>,
                oDiv
            );
        }

    
    </script>
</html>